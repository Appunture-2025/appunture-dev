sequenceDiagram
    participant U as Usuario
    participant App as App Mobile
    participant API as Backend API
    participant AI as Spring AI
    participant Gemini as Google Gemini
    participant DB as Firestore

    U->>App: Digita sintoma (ex: dor de cabeca)
    App->>API: POST /api/assistant/query

    API->>DB: Buscar pontos relacionados
    DB-->>API: Lista de pontos relevantes

    API->>AI: Montar contexto RAG
    AI->>Gemini: Enviar prompt enriquecido
    Gemini-->>AI: Resposta contextualizada

    AI->>API: Processar resposta
    API->>API: Extrair codigos de pontos
    API->>API: Adicionar disclaimer

    API-->>App: { answer, referencedPoints, disclaimer }
    App-->>U: Exibir resposta e pontos clicaveis

    opt Ver detalhes do ponto
        U->>App: Toca em ponto sugerido
        App->>App: Navegar para PointDetailScreen
    end
